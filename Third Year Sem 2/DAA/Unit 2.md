# Unit 2

## KnapSack problem

The knapsack problem is the following problem in combinatorial optimization:

    Given a set of items, each with a weight and a value, determine which items to include in the collection so that the total weight is less than or equal to a given limit and the total value is as large as possible

Lets see it in a boarder view

    Suppose
    n (no of objects) = 7
    m (max weight) = 15

| Object | O | 1 | 2  | 3 | 4 | 5 | 6 | 7 |
| -| -| -| -| -| -| -| -| - |
| Profit | P | 10 | 5 | 15 | 7 | 6 | 18 | 3 |
Weight | W | 2 | 3 | 5 | 7 | 1 | 4 | 1
P/W | R | 5 | 1.66 | 3 | 1 | 6 | 4.5 | 3 |

Let's see what object we can put

| Remaining weight | 15 | 14 | 12 | 8 | 3 | 2 | 0 |  
| - | - | - | - | - | - | - | - |
| Weight added |  1 | 2 | 4 | 5 |  1 | 2 | 0 |

Selected elements

| x1 | x2 | x3 | x4 | x5 |  x6 | x7 |
| - | - | - | - | - | - | - |
| 1 | 2/3|  1 | 0 | 1 | 1 | 1 |

SUM(xiwi) = 1 x 2 + 2/3 x 3 + 1 x 5 + 1 x 1 + 1 x 4 + 1 x 1  = 15

SUM(xipi) = 1 x 10 + 2/3 x 5 + 1 x 6 + 1 x 18 + 1 x 3 = 55.3

Q. Let's see the same problem but with steps again

    n = 7
    m = 5

| Object | O | 1 | 2  | 3 | 4 | 5 | 6 | 7 |
| -| -| -| -| -| -| -| -| - |
| Profit | P | 10 | 5 | 15 | 7 | 6 | 18 | 3 |
Weight | W | 2 | 3 | 5 | 7 | 1 | 4 | 1
P/W | R | 5 | 1.66 | 3 | 1 | 6 | 4.5 | 3 |

Selection with max profit

| Obj | profit | weight | remaining weight |
| - | - | - | - |
| 0 | 0 | 0 | 15 |
| 6 | 18 | 4 | 15 - 4 = 11 |
| 3 | 15 | 5 | 11 - 5 = 6 |
| 1 | 10 | 2 | 6 - 2 = 4 |
| Assumed | 4 * 1 = 4 | 4 | 4 - 4 = 0 |

max profit = 47

Selection with min weight

| Obj | profit | weight | remaining weight |
| - | - | - | - |
| 0 | 0 | 0 | 15 |
| 5 | 6 | 1 | 15 - 1 = 14 |
| 7 | 3 | 1 | 14 - 1 = 13 |
| 1 | 10 | 2 | 13 - 2 = 11 |
| 2 | 5 | 3 | 11 - 3 = 8 |
| 6 | 18 | 4 | 8 - 4 = 4 |
|  | 4 * 3 = 12 | 4 | 4 - 4 = 0 |

max profit = 54

Select  object with maximum pi/wi

| Obj | profit | weight | remaining weight |
| - | - | - | - |
| 0 | 0 | 0 | 15 |
| 5 | 6 | 1 | 15 - 1 = 14 |
| 1 | 10 | 2 | 14 - 2 = 12 |
| 6 | 18 | 4 | 12 - 4 = 8 |
| 3 | 15 | 5 | 8 - 5 = 3 |
| 7 | 3 | 1 | 3 - 1 = 2 |
| 2 | 2 * 1.66 | 2 | 2 - 2 = 0 |  

max profit = 55.34

Because of max pi/wi we will get maximum value

## Job Sequencing with deadlines

For the following sequence of a job find out final sequence and max profit

| Job | 1 |  2 | 3 | 4 | 5 | 6 | 7
| - | - | - | - | - | - | - | - |
| Profit | 3 | 5 | 20 | 18 | 0 | 6 | 30 |
| Deadline| 1 | 3 | 4 | 3 | 2 | 1 | 2 |

Solution

Step 1

| Job | 7 |  3 | 4 | 6 | 2 | 1 | 5
| - | - | - | - | - | - | - | - |
| Profit | 30 | 20 | 18 | 6 | 5 | 3 | 0 |
| Deadline| 2 | 4 | 3 | 1 | 3 | 1 | 2 |

Step 2

| 0 | 1 | 2 | 3 | 4 |
| - | - | - | - | - |

as deadline values are from 0 to 4

Step 3

| JOB | 7 | | | | | |
| - | - | - | - | - | - | - |
| Profit | 30 |
| Deadline | 2 |

Step 4

| JOB | 7 | 3 | 4 | 6 | | |
| - | - | - | - | - | - | - |
| Profit | 30 | 20 | 18 | 6 |
| Deadline | 2 | 4 | 3 | 1 |

Step 5

| Job | 6 | 7 | 4 | 3 |
| - | - | - | - | - |
| Profit | 6 | 30 | 18 | 20 |
| Deadline | 1 | 2 | 3 | 4 |  

Max profit is 74

## 0/1 KnapSack  using DP

    k(i,c) = max[(Pi + k(i - 1, c - wi),k(i - 1, c))]

    k(i,c) = 0 [i == 0 || c == 0]

    k(i,c) = k(i,c) [wi > c]

Some *Example*

| | 01 | 02 | 03 |
| - | - | - | - |
| P | 10 | 12 | 28 |
| W | 1 | 2 | 4 |

0 to 6 is capacity below and 0 to 3 are objects

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 |
| 2 | 0 |
| 3 | 0 |

    k(1,1) = max[(10 + k(1,1)),k(1,0)]
    k(1,1) = max[10,0]
    k(1,1) = 10

    k(1,2) = max[(10 + k(1,2)),k(1,2-1)]
    k(1,2) = max[10,0]
    k(1,2) = 10

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 |
| 2 | 0 |
| 3 | 0 |

    k(1,3) = max[(10 + k(0,2)),k(0,3)]
    k(1,3) = max[10,0]
    k(1,3) = 10

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 |
| 2 | 0 |
| 3 | 0 |

    k(1,3) = max[(10 + k(0,2)),k(0,3)]
    k(1,3) = max[10,0]
    k(1,3) = 10

    K(1,4) = K(1,5) = k(1,6) = max(10,0) = 10

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 |
| 3 | 0 |

    K(2,1) = K(2-1,1) = 10

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 |
| 3 | 0 |

    K(2,2) = MAX[12 + K(1,0),K(1,2)]
    K(2,2) = MAX[12,10]
    K(2,2) = 12

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 |
| 3 | 0 |

    K(2,3) = MAX(12+K(1,1),K(1,3))
    K(2,3) = MAX(12+10,10)
    K(2,3) = 22

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 |
| 3 | 0 |

    K(2,4) = MAX(12+K(1,2),K(1,4))
    K(2,4) = MAX(12+10,10)
    K(2,4) = 22

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 |
| 3 | 0 |

    K(2,5) = MAX(12+K(1,3),K(1,5))
    K(2,5) = MAX(12+10,10)
    K(2,5) = 22
    K(2,6) = 22

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 |

    K(3,1) = MAX(10,0)
    K(3,1) = 10

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 |

    K(3,2) = 12

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 |

    K(3,3) = 22

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 |

    K(3,4) = MAX(28 + K(2,0),K(2,4))
    K(3,4) = MAX(38,22)
    K(3,4) = 28

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 28 |

    K(3,5) = MAX(28 + K(2,1),K(2,5))
    K(3,4) = MAX(28 + 10 , 22)
    K(3,4) = 38

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 28 | 38 |

    K(3,6) = MAX(28 + K(2,2),K(2,6))
    K(3,6) = MAX(28 + 12, 22)
    K(3,6) = 40

| O/C | 00 | 01 | 02 | 03 | 04 | 05 | 06 |
| - | - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 10 | 10 | 10 | 10 | 10 | 10 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 28 | 38 | 40 |

EXAMPLE *2*

NO OF ITEMS = 4

MAX WEIGHT = 5

WEIGHTS --> 2, 1, 3, 2

VALUES --> 12, 10, 20, 15

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |

    K(1,1) = 0

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |

    K(1,2) = MAX[12 + K(0,0),K(0,2)]
    K(1,2) = MAX[12,0]
    K(1,2) = 12

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |

    K(1,3) = MAX[12 + K(0,1),K(0,3)]
    K(1,2) = MAX[12,0]
    K(1,2) = 12

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |

    K(1,4) = K(1,5) = 12

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 |
| 3 | 0 |
| 4 | 0 |

    K(2,1) = MAX[10 + K(1,0),K(1,1)]
    K(2,1) = MAX[10,0]
    K(2,1) = 10

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 |
| 3 | 0 |
| 4 | 0 |

    K(2,2) = MAX[10 + K(1,1),K(1,2)]
    K(2,2) = MAX[10,12]
    K(2,2) = 12

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 |
| 3 | 0 |
| 4 | 0 |

    K(2,3) = MAX[10 + K(1,2),K(1,3)]
    K(2,3) = MAX[10 + 12 ,12]
    K(2,3) = 22

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 |
| 3 | 0 |
| 4 | 0 |

    K(2,4) = MAX[10 + K(1,3),K(1,4)]
    K(2,4) = MAX[10 + 12 ,12]
    K(2,4) = 22

    K(2,4) = K(2,5)

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 |
| 4 | 0 |

    K(3,1) = K(2,1)
    K(3,1) = 10

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 |
| 4 | 0 |

    K(3,2) = K(2,2)
    K(3,2) = 12

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 |
| 4 | 0 |

    K(3,3) = MAX[20 + K(2,0),K(2,3)]
    K(3,2) = MAX[20 + 0,22]
    K(3,2) = 22

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 |
| 4 | 0 |

    K(3,4) = MAX[20 + K(2,1),K(2,4)]
    K(3,4) = MAX[20 + 10,22]
    K(3,4) = 30

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 |
| 4 | 0 |

    K(3,5) = MAX[20 + K(2,2),K(2,5)]
    K(3,5) = MAX[20 + 12,22]
    K(3,5) = 32

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 |

    K(4,1) = K(3,1)
    K(4,1) = 10

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 | 10 |

    K(4,2) = MAX[15 + K(3,0),K(3,2)]
    K(4,2) = MAX[15,12]
    K(4,2) = 15

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 | 10 | 15 |

    K(4,3) = MAX[15 + K(3,1),K(3,3)]
    K(4,3) = MAX[15 + 10,22]
    K(4,3) = 25

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 | 10 | 15 | 25 |

    K(4,4) = MAX[15 + K(3,2),K(3,4)]
    K(4,4) = MAX[15 + 12,30]
    K(4,4) = 30

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 | 10 | 15 | 25 | 30 |

    K(4,5) = MAX[15 + K(3,3),K(3,5)]
    K(4,5) = MAX[15 + 22,32]
    K(4,5) = 37

| C/O | 00 | 01 | 02 | 03 | 04 | 05 |
| - | - | - | - | - | - | - |
| 0 | 0 | 0 | 0 | 0 | 0 | 0 |
| 1 | 0 | 0 | 12 | 12 | 12 | 12 |
| 2 | 0 | 10 | 12 | 22 | 22 | 22 |
| 3 | 0 | 10 | 12 | 22 | 30 | 32 |
| 4 | 0 | 10 | 15 | 25 | 30 | 37 |
